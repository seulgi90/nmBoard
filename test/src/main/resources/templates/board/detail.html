<!doctype html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>NM 게시판 </title>
  
  <style>
  table, th, td {
  border: 1px solid;
  }
  </style>
  
</head>	

<body>

<form action="updateboard" id="detail" method="post">
	<table>
   		<tr>
		 <th>번호</th>
		 <td><input type="text" name="no" th:value="${detailBoard.no}" readonly></td>
		</tr>
		<tr>
		 <th>제목</th>
		 <td><input type="text" name="title" th:value="${detailBoard.title}"></td>
		</tr>
		<tr>
		 <th>내용</th>
		 <td><textarea name="content" cols="30" rows="5" th:text="${detailBoard.content}"></textarea></td>
		</tr>
		

   
	</table>
	
		<button type="button" onclick="update(this.form)">수정</button>
		<button type="button" th:onclick="'remove(' + ${detailBoard.no} + ');'">삭제</button>
      	<button type="button" th:onclick="location.href='/board/boardlist'">목록</button>
      
	</form>
	

</body>

<script src="http://code.jquery.com/jquery-latest.min.js"></script>

<script>
function update(form) {
	
	let updateBoardData = $("#detail").serialize();
	
	console.log(updateBoardData + "<----updateBoard");
	
	let result = confirm('글을 수정 하시겠습니까?');
	console.log(result + "<----result"); // true
	if (result == true) {
		
		$.ajax({
			type : "post",
			url : "updateboard",
			data: updateBoardData,
			dataType:"text",
			success : function(data) {
				console.log(data + "<---suc");
				alert('글 수정 성공');
				window.location.href = "/detail?no=" + no;
			}
		}); // ajax
		
	} else {
		alert('글 수정 취소');
	}	
}

function remove(no) {
	
	let removeBoard = $("#detail").serialize();
	
	let result = confirm('글을 삭제 하시겠습니까?');
	 
	 if (result == true) {
		 
		    $.ajax({
		    	type: "POST",
		        url: "delete",
		        data: removeBoard,
		  	    success : function(data) {
		  		alert('글 삭제 성공');
		  			window.location.href = "/board/boardlist";
		  			}
		  		}); // ajax 
	 } else {
		 alert('글 삭제 취소');
		 window.location.href = "/board/detail?no=" + no;
	 }
 }
</script>
</html>