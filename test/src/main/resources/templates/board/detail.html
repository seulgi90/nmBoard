<!doctype html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>NM 게시판 </title>
  
  <style>
  table, th, td {
  border: 1px solid;
  }
  </style>
  
</head>	

<body>

<form id="detail">
	<table>
   		<tr>
		 <th>번호</th>
		 <td><input type="text" name="no" th:value="${boardD.no}" readonly></td>
		</tr>
		<tr>
		 <th>제목</th>
		 <td><input type="text" name="title" th:value="${boardD.title}"></td>
		</tr>
		<tr>
		 <th>내용</th>
		 <td><textarea name="content" cols="30" rows="5" th:text="${boardD.content}"></textarea></td>
		</tr>
		<tr>
		 <th>작성자</th>
     	 <td th:text="${boardD.writer}"></td>
   		</tr>

   
	</table>
	
		<button type="button" onclick="update(this.form)">수정</button>
		<button type="button" th:onclick="'remove(' + ${boardD.no} + ');'">삭제</button>
      	<a href='list'>목록</a>
      
	</form>
	

</body>

<script src="http://code.jquery.com/jquery-latest.min.js"></script>

<script>
function update(form) {
	var form1 = $("#detail").serialize();
	console.log(form1);
	var result = confirm('글을 수정 하시겠습니까?');
	
	if (result == true) {
		
		$.ajax({
			url : "update",
			type : "POST",
			data : form1,
			dataType : "text",
			success : function(data) {
				alert('글 수정 성공');
				window.location.href = "/detail?no" + no;
			}
		}); // ajax
		
	} else {
		alert('글 수정 취소');
	}	
}

function remove(no) {
	
	var form2 = $("#detail").serialize();
	var result = confirm('글을 삭제 하시겠습니까?');
	 
	 if (result == true) {
		 
		    $.ajax({
		        url: "delete",
		        type: "POST",
		        data: form2,
		  	    success : function(data) {
		  		alert('글 삭제 성공');
		  			window.location.href = "/main/list";
		  			}
		  		}); // ajax 
	 } else {
		 alert('글 삭제 취소');
		 window.location.href = "/main/detail?no=" + no;
	 }
 }
</script>
</html>