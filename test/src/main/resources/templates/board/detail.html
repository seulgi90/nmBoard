<!doctype html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<!--   <meta charset="utf-8"> -->
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="Content-Type" content="text/html; charset=EUC-KR">
  <title>NM 게시판 </title>
  
  <style>
  table, th, td {
  border: 1px solid;
  }
  </style>
  
</head>	

<body>

<form id="detail">
	<table>
   		<tr>
		 <th>번호</th>
		 <td><input type="text" name="no" th:value="${detailBoard.no}" readonly></td>
		</tr>
		<tr>
		 <th>제목</th>
		 <td><input type="text" name="title" th:value="${detailBoard.title}"></td>
		</tr>
		<tr>
		 <th>내용</th>
		 <td><textarea name="content" cols="30" rows="5" th:text="${detailBoard.content}"></textarea></td>
		</tr>
		<input type="hidden" name="userNo" th:value="${detailBoard.writer.userNo}">
		<input type="hidden" name="userNo" th:value="${detailBoard.userNo}">
		<b>Authenticated DTO:</b>
		<div sec:authorize="isAuthenticated()" sec:authentication="principal"></div>
		
		<b>Authenticated username:</b>
<div sec:authorize="isAuthenticated()" sec:authentication="name"></div>

   
	</table>
	
	<button type="button" onclick="update(this.form)">수정</button>
	<button type="button" th:if="${detailBoard.writer.userNo == detailBoard.userNo}" th:onclick="'deleteBoard(' + ${detailBoard.no} + ');'">삭제</button>
    <button type="button" th:onclick="location.href='/board/boardlist'">목록</button>
      
	</form>
	

</body>

<script>
function update(form) {

	form.action ="updateboard";
	form.method = "post";
	form.submit();
	
 	alert("글 수정 성공");
}

function deleteBoard(no) {
	
	let deleteBoard = document.getElementById("detail");
	
	deleteBoard.action ="deleteboard";
	deleteBoard.method = "post";
	deleteBoard.submit();
	
	alert("글 삭제 성공");
	
 }
</script>
</html>