<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.nmBoard.test.dao.UserDao">
  

  <!-- 로그인 -->
  <select id="findByUserId" resultType="User">
		select
			USER.USERNO,
			USER.ID,
			USER.PASSWORD,
			USER.NAME,
			ROLE.ROLENAME
		from 
		    USER
		join USERROLE on USER.USERNO = USERROLE.USERNO
		join ROLE on ROLE.ROLENO = USERROLE.ROLENO
		where
			USER.ID = #{id}
    </select>
    
     <!-- 회원가입 -->
<!--     <insert id="saveUser"> -->
<!--         INSERT INTO TB_USER -->
<!--         (USER_ID, USER_PW, USER_NAME, USER_AUTH, APPEND_DATE, UPDATE_DATE) -->
<!--         VALUES(#{userId},#{userPw},#{userName},#{userAuth},#{appendDate},#{updateDate}); -->
<!--     </insert> -->
    
    <insert id="userRoleSave">
		insert into USERROLE
        	(USERNO, ROLENO)
        values
            (#{userNo}, #{roleNo})
	</insert>
	
	<select id="findUserNo">
		select 
			USERNO
		from 
		    USER
		where 
		    ID = #{ID}
	</select>
	
	<select id="findRoleNo">
		select 
			ROLENO
		from 
		    ROLE
		where 
		    ROLENAME = #{roleName}
	</select>
  
</mapper>
